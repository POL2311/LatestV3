set -e
SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"
REPO_ROOT="$(cd "$SCRIPT_DIR/.." && pwd)"

BIN="$REPO_ROOT/solana/target/release/cargo-build-sbf"
[[ -x "$BIN" ]] || BIN="$REPO_ROOT/solana/target/debug/cargo-build-sbf"

SDK="$REPO_ROOT/solana/sdk/sbf"

if [[ ! -x "$BIN" ]]; then
  echo "❌ No encontré el binario cargo-build-sbf en:"
  echo "   $REPO_ROOT/solana/target/release/cargo-build-sbf"
  echo "   $REPO_ROOT/solana/target/debug/cargo-build-sbf"
  exit 1
fi

exec "$BIN" --sbf-sdk "$SDK" "$@"
